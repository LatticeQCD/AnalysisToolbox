<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Contributions &mdash; AnalysisToolbox 1.2.2 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Writing Tests" href="testing.html" />
    <link rel="prev" title="Tutorial" href="../tutorial.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #343131" >
            <a href="../index.html" class="icon icon-home"> AnalysisToolbox
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">Tutorial</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Contributions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="testing.html">Writing Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="git.html">How to do pull requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="documentation.html">Documenting your code</a></li>
<li class="toctree-l2"><a class="reference internal" href="logging.html">Logging</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../base/base.html">Basic Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../math/math.html">Math</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dataAnalysis/dataAnalysis.html">Data Analysis Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../physicsAnalysis/physicsAnalysis.html">Physics Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interfacing/interfacing.html">Interfacing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../applications/applications.html">Applications</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #343131" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AnalysisToolbox</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Contributions</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/contributions/contributions.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="contributions">
<h1>Contributions<a class="headerlink" href="#contributions" title="Permalink to this headline"></a></h1>
<p>Here are a few basic guidelines to follow when making a contribution to the AnalysisToolbox:</p>
<ul>
<li><p>Please <strong>write documentation</strong> (like this one) for any new module that you make.</p></li>
<li><p>Please <strong>write a test for each new feature you implement</strong>. We keep our tests in <code class="docutils literal notranslate"><span class="pre">AnalysisToolbox/testing</span></code>.</p></li>
<li><p>Make sure you <strong>run all the tests</strong> when you’re done to check that nothing was broken. You can find more information
about the tests <a class="reference internal" href="testing.html"><span class="doc std std-doc">here</span></a>.</p></li>
<li><p>For all screen output and for terminating your program because of errors: Please try to use the <code class="docutils literal notranslate"><span class="pre">logger</span></code> in <code class="docutils literal notranslate"><span class="pre">latqcdtools/base/logger.py</span></code>.
This has the advantage that all scripts are terminated in the same way. Also you can have your program make little log files in
addition to the terminal output, in case you want that! Finally in the case of error, warning, and debug messages, the logger will
report to you where the messages are coming from.</p></li>
<li><p>For all plotting: Please try to use <code class="docutils literal notranslate"><span class="pre">latqcdtools/base/plotting.py</span></code>.</p></li>
<li><p>For reading or writing any data table: Please try to use <code class="docutils literal notranslate"><span class="pre">readTable</span></code> and <code class="docutils literal notranslate"><span class="pre">writeTable</span></code> in <code class="docutils literal notranslate"><span class="pre">latqcdtools/base/readWrite.py</span></code>.</p></li>
<li><p>If you would like to make your python script an executable (e.g. by using <code class="docutils literal notranslate"><span class="pre">chmod</span> <span class="pre">+x</span></code>) you should add the line <code class="docutils literal notranslate"><span class="pre">#!/usr/bin/env</span> <span class="pre">python3</span></code>
at the beginning of your script.</p></li>
<li><p>Please <strong>be mindful of backward compatibility</strong>. David is sometimes the worst offender in this regard. In particular, try not to
delete functions, even if it seems like they are not being used. If you find a better way of organizing things, you may need
to implement wrappers to maintain backward compatibility. There are many people using the AnalysisToolbox, and we don’t want
to disrupt their workflows too much.</p></li>
<li><p>If you are writing a method, and you want to put a comment explaining what the method generally does and how to use it, you should include
it as a <em>docstring</em>. (You can find an explanation of docstrings <a class="reference external" href="https://www.programiz.com/python-programming/docstrings">here</a>.)
An advantage to using these is that people can easily learn about your function by calling <code class="docutils literal notranslate"><span class="pre">help(functionName)</span></code>. Certain IDEs, such as
VSCode, include tools to generate your docstrings largely automatically. Also in VSCode, when I hover over a function, it reports
to me its docstring, which I find helpful.</p></li>
<li><p><strong>We do not allow the <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">X</span> <span class="pre">import</span> <span class="pre">*</span></code> construction</strong> anywhere within the AnalysisToolbox, as it makes it difficult to tell where
function methods are truly coming from. The problem with modules is just that other people may want to use them and add to them,
and for that they need to understand where all the methods are defined. This syntax also confuses IDEs.</p></li>
<li><p>Please wrap all your <code class="docutils literal notranslate"><span class="pre">main_*</span></code> applications and <code class="docutils literal notranslate"><span class="pre">test*</span></code> tests like so:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">myMainOrTest</span><span class="p">():</span>
   <span class="o">...</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">myMainOrTest</span><span class="p">()</span>
</pre></div>
</div>
<p>This has a few advantages: (1) you can put functions outside this definition, then import your main program and borrow those
functions without running anything; (2) the logger will give more meaningful output when called in your main function; and (3)
weirdly this seems to help some of our parallelizers run on some Macs.</p>
</li>
<li><p>Please <strong>include a <code class="docutils literal notranslate"><span class="pre">__repr__</span></code> function for all your classes</strong>. For instance</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">CAT</span><span class="p">():</span>
      <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">          </span><span class="sd">&quot;&quot;&quot; A class for cats. &quot;&quot;&quot;</span>
          <span class="o">...</span>
      <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
          <span class="k">return</span> <span class="s2">&quot;CAT&quot;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">__repr__</span></code> function is a special method that provides a string representation of an instance of the class. This is used by
for instance the <a class="reference internal" href="logging.html"><span class="doc std std-doc">logger</span></a>, which when printing e.g. <code class="docutils literal notranslate"><span class="pre">DEBUG</span></code> messages, will report what method (or class if applicable)
called it.</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">-&gt;</span> <span class="pre">str</span></code> syntax in the above example indicates that we expect a string as a return value. I don’t think this is used by the Python
interpreter, but it helps keep the code self-documenting. You don’t have to use such <em>return type annotations</em>, because I think in
general you may write methods that might return multiple kinds of types. In the case of <code class="docutils literal notranslate"><span class="pre">__repr__</span></code> there is only one possibility,
so I try to include it.</p></li>
<li><p>If you have a method that you think shouldn’t be called outside of a module, for instance some kind of internal helper method
or auxiliary method, try to prefix that method with an underscore, like <code class="docutils literal notranslate"><span class="pre">_method()</span></code>.</p></li>
<li><p>Please for the love of God <strong>don’t use lambda functions</strong>. I’ve been coding in Python since about 2012, and I
still can’t read these things. Why can’t you just implement it as a normal function? Using a lambda function saves one line,
but drastically reduces readability.</p></li>
</ul>
<p>Here are some more detailed articles:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Writing Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="git.html">How to do pull requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="documentation.html">Documenting your code</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging.html">Logging</a></li>
</ul>
</div>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, LatticeQCD.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>